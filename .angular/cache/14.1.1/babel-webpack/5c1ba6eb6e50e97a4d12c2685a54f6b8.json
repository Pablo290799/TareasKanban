{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/HP/Desktop/LCIK/TP IS2_renovado/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/data.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\n\nfunction BoardComponent_input_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"input\", 18);\n    i0.ɵɵlistener(\"ngModelChange\", function BoardComponent_input_7_Template_input_ngModelChange_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.titleChanged = true);\n    })(\"ngModelChange\", function BoardComponent_input_7_Template_input_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.boardInfo.title = $event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.boardInfo.title);\n  }\n}\n\nfunction BoardComponent_button_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function BoardComponent_button_8_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.saveBoardTitle());\n    });\n    i0.ɵɵtext(1, \" Guardar \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BoardComponent_div_14_p_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"p\", 28);\n    i0.ɵɵlistener(\"click\", function BoardComponent_div_14_p_2_Template_p_click_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const list_r8 = i0.ɵɵnextContext().$implicit;\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.editingTitle(list_r8, true));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const list_r8 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", list_r8.title, \" \");\n  }\n}\n\nfunction BoardComponent_div_14_input_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"input\", 29);\n    i0.ɵɵlistener(\"ngModelChange\", function BoardComponent_div_14_input_3_Template_input_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r19);\n      const list_r8 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(list_r8.title = $event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const list_r8 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"ngModel\", list_r8.title);\n  }\n}\n\nfunction BoardComponent_div_14_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function BoardComponent_div_14_button_4_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const list_r8 = i0.ɵɵnextContext().$implicit;\n      const ctx_r21 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r21.updateListTitle(list_r8));\n    });\n    i0.ɵɵtext(1, \" Guardar \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BoardComponent_div_14_div_6_p_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 35);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const card_r24 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", card_r24.title, \" \");\n  }\n}\n\nfunction BoardComponent_div_14_div_6_input_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r32 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"input\", 36);\n    i0.ɵɵlistener(\"ngModelChange\", function BoardComponent_div_14_div_6_input_2_Template_input_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r32);\n      const card_r24 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(card_r24.title = $event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const card_r24 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"ngModel\", card_r24.title);\n  }\n}\n\nfunction BoardComponent_div_14_div_6_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r36 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function BoardComponent_div_14_div_6_button_4_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r36);\n      const card_r24 = i0.ɵɵnextContext().$implicit;\n      const ctx_r34 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r34.updateCard(card_r24));\n    });\n    i0.ɵɵtext(1, \" Actualizar \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BoardComponent_div_14_div_6_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r39 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 37);\n    i0.ɵɵlistener(\"click\", function BoardComponent_div_14_div_6_button_5_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r39);\n      const card_r24 = i0.ɵɵnextContext().$implicit;\n      const ctx_r37 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r37.deleteCard(card_r24));\n    });\n    i0.ɵɵtext(1, \" Borrar \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BoardComponent_div_14_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r41 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 30);\n    i0.ɵɵlistener(\"click\", function BoardComponent_div_14_div_6_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r41);\n      const card_r24 = restoredCtx.$implicit;\n      const ctx_r40 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r40.editingCard(card_r24, true));\n    });\n    i0.ɵɵtemplate(1, BoardComponent_div_14_div_6_p_1_Template, 2, 1, \"p\", 31);\n    i0.ɵɵtemplate(2, BoardComponent_div_14_div_6_input_2_Template, 1, 1, \"input\", 32);\n    i0.ɵɵelementStart(3, \"div\", 33);\n    i0.ɵɵtemplate(4, BoardComponent_div_14_div_6_button_4_Template, 2, 0, \"button\", 7);\n    i0.ɵɵtemplate(5, BoardComponent_div_14_div_6_button_5_Template, 2, 0, \"button\", 34);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const card_r24 = ctx.$implicit;\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r12.editCard[card_r24.id]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r12.editCard[card_r24.id]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r12.editCard[card_r24.id]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r12.editCard[card_r24.id]);\n  }\n}\n\nfunction BoardComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r43 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"div\", 21);\n    i0.ɵɵtemplate(2, BoardComponent_div_14_p_2_Template, 2, 1, \"p\", 22);\n    i0.ɵɵtemplate(3, BoardComponent_div_14_input_3_Template, 1, 1, \"input\", 23);\n    i0.ɵɵtemplate(4, BoardComponent_div_14_button_4_Template, 2, 0, \"button\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 24);\n    i0.ɵɵtemplate(6, BoardComponent_div_14_div_6_Template, 6, 4, \"div\", 25);\n    i0.ɵɵelementStart(7, \"div\", 26);\n    i0.ɵɵlistener(\"click\", function BoardComponent_div_14_Template_div_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r43);\n      const list_r8 = restoredCtx.$implicit;\n      const ctx_r42 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r42.addCard(list_r8));\n    });\n    i0.ɵɵtext(8, \" + Agregar Tarjeta \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function BoardComponent_div_14_Template_button_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r43);\n      const list_r8 = restoredCtx.$implicit;\n      const ctx_r44 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r44.deleteBoardList(list_r8));\n    });\n    i0.ɵɵtext(10, \" Eliminar Lista \");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const list_r8 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.editTitle[list_r8.id]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.editTitle[list_r8.id]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.editTitle[list_r8.id]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.listCards[list_r8.id]);\n  }\n}\n\nexport class BoardComponent {\n  constructor(route, dataService, router) {\n    this.route = route;\n    this.dataService = dataService;\n    this.router = router;\n    this.lists = [];\n    this.boardId = null;\n    this.editTitle = {};\n    this.editCard = {};\n    this.boardInfo = null;\n    this.titleChanged = false;\n    this.listCards = {};\n    this.addUserEmail = '';\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.boardId = _this.route.snapshot.paramMap.get('id');\n\n      if (_this.boardId) {\n        _this.boardInfo = (yield _this.dataService.getBoardInfo(_this.boardId)).data;\n        _this.lists = yield _this.dataService.getBoardLists(_this.boardId); // Retrieve cards for each list\n\n        for (let list of _this.lists) {\n          _this.listCards[list.id] = yield _this.dataService.getListCards(list.id);\n        }\n\n        _this.handleRealtimeUpdates();\n      }\n    })();\n  } //\n  // BOARD logic\n  //\n\n\n  saveBoardTitle() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this2.dataService.updateBoard(_this2.boardInfo);\n      _this2.titleChanged = false;\n    })();\n  }\n\n  deleteBoard() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this3.dataService.deleteBoard(_this3.boardInfo);\n\n      _this3.router.navigateByUrl('/workspace');\n    })();\n  } //\n  // LISTS logic\n  //\n\n\n  addList() {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      const newList = yield _this4.dataService.addBoardList(_this4.boardId, _this4.lists.length);\n    })();\n  }\n\n  editingTitle(list, edit = false) {\n    this.editTitle[list.id] = edit;\n  }\n\n  updateListTitle(list) {\n    var _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this5.dataService.updateBoardList(list);\n\n      _this5.editingTitle(list, false);\n    })();\n  }\n\n  deleteBoardList(list) {\n    var _this6 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this6.dataService.deleteBoardList(list);\n    })();\n  } //\n  // CARDS logic\n  //\n\n\n  addCard(list) {\n    var _this7 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this7.dataService.addListCard(list.id, _this7.boardId, _this7.listCards[list.id].length);\n    })();\n  }\n\n  editingCard(card, edit = false) {\n    this.editCard[card.id] = edit;\n  }\n\n  updateCard(card) {\n    var _this8 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this8.dataService.updateCard(card);\n\n      _this8.editingCard(card, false);\n    })();\n  }\n\n  deleteCard(card) {\n    var _this9 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this9.dataService.deleteCard(card);\n    })();\n  } // Invites\n\n\n  addUser() {\n    var _this10 = this;\n\n    return _asyncToGenerator(function* () {\n      const res = yield _this10.dataService.addUserToBoard(_this10.boardId, _this10.addUserEmail);\n      _this10.addUserEmail = '';\n    })();\n  }\n\n  onKeydownHandler(event) {\n    if (event.keyCode === 27) {\n      // Close whatever needs to be closed!\n      this.titleChanged = false;\n      Object.keys(this.editCard).map(item => {\n        this.editCard[item] = false;\n        return item;\n      });\n      Object.keys(this.editTitle).map(item => {\n        this.editTitle[item] = false;\n        return item;\n      });\n    }\n  }\n\n  handleRealtimeUpdates() {\n    this.dataService.getTableChanges().subscribe(update => {\n      const record = update.new?.id ? update.new : update.old;\n      const event = update.eventType;\n      if (!record) return;\n\n      if (update.table == 'cards') {\n        if (event === 'INSERT') {\n          this.listCards[record.list_id].push(record);\n        } else if (event === 'UPDATE') {\n          const newArr = [];\n\n          for (let card of this.listCards[record.list_id]) {\n            if (card.id == record.id) {\n              card = record;\n            }\n\n            newArr.push(card);\n          }\n\n          this.listCards[record.list_id] = newArr;\n        } else if (event === 'DELETE') {\n          this.listCards[record.list_id] = this.listCards[record.list_id].filter(card => card.id !== record.id);\n        }\n      } else if (update.table == 'lists') {\n        if (event === 'INSERT') {\n          this.lists.push(record);\n          this.listCards[record.id] = [];\n        } else if (event === 'UPDATE') {\n          this.lists.filter(list => list.id === record.id)[0] = record;\n          const newArr = [];\n\n          for (let list of this.lists) {\n            if (list.id == record.id) {\n              list = record;\n            }\n\n            newArr.push(list);\n          }\n\n          this.lists = newArr;\n        } else if (event === 'DELETE') {\n          this.lists = this.lists.filter(list => list.id !== record.id);\n        }\n      }\n    });\n  }\n\n}\n\nBoardComponent.ɵfac = function BoardComponent_Factory(t) {\n  return new (t || BoardComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.DataService), i0.ɵɵdirectiveInject(i1.Router));\n};\n\nBoardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: BoardComponent,\n  selectors: [[\"app-board\"]],\n  hostBindings: function BoardComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"keydown\", function BoardComponent_keydown_HostBindingHandler($event) {\n        return ctx.onKeydownHandler($event);\n      }, false, i0.ɵɵresolveDocument);\n    }\n  },\n  decls: 23,\n  vars: 4,\n  consts: [[1, \"bg-emerald-600\"], [1, \"max-w-7xl\", \"mx-auto\", \"px-4\", \"sm:px-6\", \"lg:px-8\"], [1, \"w-full\", \"py-6\", \"flex\", \"items-center\", \"justify-between\", \"border-b\", \"border-emerald-500\", \"lg:border-none\"], [1, \"flex\", \"items-center\"], [\"routerLink\", \"/workspace\", 1, \"font-semibold\", 2, \"color\", \"white\"], [1, \"flex\", \"gap-4\"], [\"class\", \"ml-10 space-x-4 text-white font-bold bg-rgb-32-62-129\", 3, \"ngModel\", \"ngModelChange\", 4, \"ngIf\"], [\"class\", \"font-medium\", 3, \"click\", 4, \"ngIf\"], [1, \"flex\"], [1, \"font-medium\", \"text-small\", \"text-red-700\", 3, \"click\"], [1, \"max-w-7xl\", \"mx-auto\", \"px-4\", \"sm:px-6\", \"lg:px-8\", \"py-8\"], [1, \"grid\", \"grid-cols-2\", \"gap-x-4\", \"gap-y-8\", \"sm:grid-cols-3\", \"sm:gap-x-6\", \"lg:grid-cols-4\", \"xl:gap-x-8\"], [\"class\", \"relative min-h-52 h-auto rounded font-semibold text-sm py-4 px-4\", \"style\", \"background-color: rgb(32, 62, 129);\", 4, \"ngFor\", \"ngForOf\"], [1, \"relative\", \"min-h-auto\", \"h-16\", \"rounded\", \"font-semibold\", \"text-lg\", \"py-4\", \"px-4\", 2, \"background-color\", \"rgb(32, 62, 129)\", \"color\", \"white\", 3, \"click\"], [1, \"flex\", \"gap-4\", \"py-12\", \"items-center\"], [1, \"text-3xl\", \"font-extrabold\", \"text-gray-900\", \"block\"], [\"placeholder\", \"ejemplo@xd.com\", 1, \"block\", \"px-3\", \"py-2\", \"border\", \"border-gray-300\", \"rounded-md\", \"shadow-sm\", \"focus:outline-none\", \"focus:ring-emerald-500\", \"focus:border-emerald-500\", \"sm:text-sm\", 3, \"ngModel\", \"ngModelChange\"], [1, \"inline-flex\", \"items-center\", \"px-2.5\", \"py-1.5\", \"border\", \"border-transparent\", \"text-xs\", \"font-medium\", \"rounded\", \"shadow-sm\", \"text-white\", \"bg-emerald-600\", \"hover:bg-emerald-700\", \"focus:outline-none\", \"focus:ring-2\", \"focus:ring-offset-2\", \"focus:ring-emerald-500\", 3, \"click\"], [1, \"ml-10\", \"space-x-4\", \"text-white\", \"font-bold\", \"bg-rgb-32-62-129\", 3, \"ngModel\", \"ngModelChange\"], [1, \"font-medium\", 3, \"click\"], [1, \"relative\", \"min-h-52\", \"h-auto\", \"rounded\", \"font-semibold\", \"text-sm\", \"py-4\", \"px-4\", 2, \"background-color\", \"rgb(32, 62, 129)\"], [1, \"flex\", \"gap-2\", \"pb-4\"], [\"class\", \"hover:cursor-pointer text-white\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 sm:text-sm\", 3, \"ngModel\", \"ngModelChange\", 4, \"ngIf\"], [1, \"flex\", \"flex-col\", \"items-center\", \"gap-2\"], [\"class\", \"h-auto w-full flex flex-col gap-2 hover:cursor-pointer\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"pt-8\", \"text-gray-500\", \"hover:cursor-pointer\", 2, \"overflow\", \"hidden\", 3, \"click\"], [1, \"font-medium\", \"text-small\", \"text-red-700\", \"hover:text-white\", 3, \"click\"], [1, \"hover:cursor-pointer\", \"text-white\", 3, \"click\"], [1, \"block\", \"w-full\", \"px-3\", \"py-2\", \"border\", \"border-gray-300\", \"rounded-md\", \"shadow-sm\", \"focus:outline-none\", \"focus:ring-emerald-500\", \"focus:border-emerald-500\", \"sm:text-sm\", 3, \"ngModel\", \"ngModelChange\"], [1, \"h-auto\", \"w-full\", \"flex\", \"flex-col\", \"gap-2\", \"hover:cursor-pointer\", 3, \"click\"], [\"class\", \"h-10 py-2 px-2 bg-white\", 4, \"ngIf\"], [\"class\", \"block px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 sm:text-sm\", 3, \"ngModel\", \"ngModelChange\", 4, \"ngIf\"], [1, \"flex\", \"align-items-center\", \"justify-between\"], [\"class\", \"font-medium text-red-600\", 3, \"click\", 4, \"ngIf\"], [1, \"h-10\", \"py-2\", \"px-2\", \"bg-white\"], [1, \"block\", \"px-3\", \"py-2\", \"border\", \"border-gray-300\", \"rounded-md\", \"shadow-sm\", \"focus:outline-none\", \"focus:ring-emerald-500\", \"focus:border-emerald-500\", \"sm:text-sm\", 3, \"ngModel\", \"ngModelChange\"], [1, \"font-medium\", \"text-red-600\", 3, \"click\"]],\n  template: function BoardComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"header\", 0)(1, \"nav\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"a\", 4);\n      i0.ɵɵtext(5, \" Atras \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(6, \"div\", 5);\n      i0.ɵɵtemplate(7, BoardComponent_input_7_Template, 1, 1, \"input\", 6);\n      i0.ɵɵtemplate(8, BoardComponent_button_8_Template, 2, 0, \"button\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"div\", 8)(10, \"button\", 9);\n      i0.ɵɵlistener(\"click\", function BoardComponent_Template_button_click_10_listener() {\n        return ctx.deleteBoard();\n      });\n      i0.ɵɵtext(11, \" Eliminar Tarjeta \");\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(12, \"main\", 10)(13, \"div\", 11);\n      i0.ɵɵtemplate(14, BoardComponent_div_14_Template, 11, 4, \"div\", 12);\n      i0.ɵɵelementStart(15, \"div\", 13);\n      i0.ɵɵlistener(\"click\", function BoardComponent_Template_div_click_15_listener() {\n        return ctx.addList();\n      });\n      i0.ɵɵtext(16, \" + Nueva Lista \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(17, \"div\", 14)(18, \"span\", 15);\n      i0.ɵɵtext(19, \"Invitar\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"input\", 16);\n      i0.ɵɵlistener(\"ngModelChange\", function BoardComponent_Template_input_ngModelChange_20_listener($event) {\n        return ctx.addUserEmail = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"button\", 17);\n      i0.ɵɵlistener(\"click\", function BoardComponent_Template_button_click_21_listener() {\n        return ctx.addUser();\n      });\n      i0.ɵɵtext(22, \" Invitar \");\n      i0.ɵɵelementEnd()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngIf\", ctx.boardInfo);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.titleChanged);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngForOf\", ctx.lists);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.addUserEmail);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i1.RouterLinkWithHref, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel],\n  styles: [\"header[_ngcontent-%COMP%] {\\n  background-color: rgb(32, 62, 129);\\n}\\n\\nbutton[_ngcontent-%COMP%] {\\n  background-color: rgb(32, 62, 129);\\n  color: white;\\n  border: 1px solid white;\\n  padding: 8px 16px;\\n  border-radius: 4px;\\n  transition: color 0.3s ease;\\n}\\n\\nbutton[_ngcontent-%COMP%]:hover {\\n  background-color: white;\\n  color: rgb(32, 62, 129);\\n  border: 1px solid white;\\n}\\n\\n.bg-rgb-32-62-129[_ngcontent-%COMP%] {\\n  background-color: rgb(32, 62, 129);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJvYXJkLmNvbXBvbmVudC5zY3NzIiwiLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcVFAlMjBJUzJfcmVub3ZhZG9cXHNyY1xcYXBwXFxjb21wb25lbnRzXFxpbnNpZGVcXGJvYXJkXFxib2FyZC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFJQTtFQUNFLGtDQUpZO0FDQ2Q7O0FET0E7RUFDSSxrQ0FUVTtFQVVWLFlBQUE7RUFDQSx1QkFBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7RUFDQSwyQkFBQTtBQ0pKOztBRE9JO0VBQ0ksdUJBQUE7RUFDQSx1QkFuQk07RUFvQk4sdUJBQUE7QUNMUjs7QURRRTtFQUNFLGtDQUFBO0FDTEoiLCJmaWxlIjoiYm9hcmQuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBEZWZpbmUgY3VzdG9tIHZhcmlhYmxlIGZvciB0aGUgUkdCIGNvbG9yXG4kY3VzdG9tLWJsdWU6IHJnYigzMiwgNjIsIDEyOSk7XG5cbi8vIEFwcGx5IHRoZSBjdXN0b20gY29sb3IgdG8gdGhlIGhlYWRlclxuaGVhZGVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogJGN1c3RvbS1ibHVlO1xufVxuXG4vLyBBcHBseSB0aGUgY3VzdG9tIGNvbG9yIHRvIHRoZSBidXR0b25cbmJ1dHRvbiB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogJGN1c3RvbS1ibHVlO1xuICAgIGNvbG9yOiB3aGl0ZTsgLy8gU2V0IGRlZmF1bHQgdGV4dCBjb2xvciB0byB3aGl0ZVxuICAgIGJvcmRlcjogMXB4IHNvbGlkIHdoaXRlOyAvLyBBZGQgYSAxcHggc29saWQgd2hpdGUgYm9yZGVyXG4gICAgcGFkZGluZzogOHB4IDE2cHg7IC8vIEFkanVzdCBwYWRkaW5nIGFzIG5lZWRlZFxuICAgIGJvcmRlci1yYWRpdXM6IDRweDsgLy8gT3B0aW9uYWw6IEFkZCBib3JkZXItcmFkaXVzIGZvciByb3VuZGVkIGNvcm5lcnNcbiAgICB0cmFuc2l0aW9uOiBjb2xvciAwLjNzIGVhc2U7IC8vIEFkZCBhIHNtb290aCB0cmFuc2l0aW9uIGZvciBjb2xvciBjaGFuZ2VcbiAgXG4gICAgLy8gQ2hhbmdlIHRleHQgY29sb3IgdG8gYmx1ZSBvbiBob3ZlclxuICAgICY6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgICAgICAgY29sb3I6ICRjdXN0b20tYmx1ZTtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgd2hpdGU7XG4gICAgfVxuICB9XG4gIC5iZy1yZ2ItMzItNjItMTI5IHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMzIsIDYyLCAxMjkpO1xuICB9XG4gICIsImhlYWRlciB7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYigzMiwgNjIsIDEyOSk7XG59XG5cbmJ1dHRvbiB7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYigzMiwgNjIsIDEyOSk7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgYm9yZGVyOiAxcHggc29saWQgd2hpdGU7XG4gIHBhZGRpbmc6IDhweCAxNnB4O1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG4gIHRyYW5zaXRpb246IGNvbG9yIDAuM3MgZWFzZTtcbn1cbmJ1dHRvbjpob3ZlciB7XG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICBjb2xvcjogcmdiKDMyLCA2MiwgMTI5KTtcbiAgYm9yZGVyOiAxcHggc29saWQgd2hpdGU7XG59XG5cbi5iZy1yZ2ItMzItNjItMTI5IHtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDMyLCA2MiwgMTI5KTtcbn0iXX0= */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","BoardComponent","constructor","route","dataService","router","ngOnInit","boardId","snapshot","paramMap","get","boardInfo","getBoardInfo","data","lists","getBoardLists","list","listCards","id","getListCards","handleRealtimeUpdates","saveBoardTitle","updateBoard","titleChanged","deleteBoard","navigateByUrl","addList","newList","addBoardList","length","editingTitle","edit","editTitle","updateListTitle","updateBoardList","deleteBoardList","addCard","addListCard","editingCard","card","editCard","updateCard","deleteCard","addUser","res","addUserToBoard","addUserEmail","onKeydownHandler","event","keyCode","Object","keys","map","item","getTableChanges","subscribe","update","record","new","old","eventType","table","list_id","push","newArr","filter","selectors","hostBindings","ctx"],"sourceRoot":"","sources":["C:\\Users\\HP\\Desktop\\LCIK\\TP IS2_renovado\\src\\app\\components\\inside\\board\\board.component.html","C:\\Users\\HP\\Desktop\\LCIK\\TP IS2_renovado\\src\\app\\components\\inside\\board\\board.component.ts"],"sourcesContent":["<header class=\"bg-emerald-600\">\n  <nav class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n    <div\n      class=\"w-full py-6 flex items-center justify-between border-b border-emerald-500 lg:border-none\"\n    >\n      <div class=\"flex items-center\">\n        <a routerLink=\"/workspace\" class=\"font-semibold\" style=\"color: white;\">\n           Atras\n        </a>\n      </div>\n      <div class=\"flex gap-4\">\n        <input\n          *ngIf=\"boardInfo\"\n          (ngModelChange)=\"titleChanged = true\"\n          class=\"ml-10 space-x-4 text-white font-bold bg-rgb-32-62-129\"\n          [(ngModel)]=\"boardInfo.title\"\n        />\n        <button\n          class=\"font-medium\"\n          *ngIf=\"titleChanged\"\n          (click)=\"saveBoardTitle()\"\n        >\n          Guardar\n        </button>\n      </div>\n\n      <div class=\"flex\">\n        <button\n          class=\"font-medium text-small text-red-700\"\n          (click)=\"deleteBoard()\"\n        >\n          Eliminar Tarjeta\n        </button>\n      </div>\n    </div>\n  </nav>\n</header>\n\n<main class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n  <div\n    class=\"grid grid-cols-2 gap-x-4 gap-y-8 sm:grid-cols-3 sm:gap-x-6 lg:grid-cols-4 xl:gap-x-8\"\n  >\n    <!-- ITERATE ALL LISTS -->\n    <div\n      *ngFor=\"let list of lists\"\n      class=\"relative min-h-52 h-auto rounded font-semibold text-sm py-4 px-4\" style=\"background-color: rgb(32, 62, 129);\"\n    >\n      <div class=\"flex gap-2 pb-4\">\n        <p\n          (click)=\"editingTitle(list, true)\"\n          class=\"hover:cursor-pointer text-white\"\n          *ngIf=\"!editTitle[list.id]\"\n        >\n          {{ list.title }}\n        </p>\n        <input\n          [(ngModel)]=\"list.title\"\n          *ngIf=\"editTitle[list.id]\"\n          class=\"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 sm:text-sm\"\n        />\n        <button\n          class=\"font-medium\"\n          *ngIf=\"editTitle[list.id]\"\n          (click)=\"updateListTitle(list)\"\n        >\n          Guardar\n        </button>\n      </div>\n\n      <!-- ITERATE LIST CARDS -->\n      <div class=\"flex flex-col items-center gap-2\">\n        <div\n          class=\"h-auto w-full flex flex-col gap-2 hover:cursor-pointer\"\n          *ngFor=\"let card of listCards[list.id]\"\n          (click)=\"editingCard(card, true)\"\n        >\n          <p class=\"h-10 py-2 px-2 bg-white\" *ngIf=\"!editCard[card.id]\">\n            {{ card.title }}\n          </p>\n          <input\n            [(ngModel)]=\"card.title\"\n            *ngIf=\"editCard[card.id]\"\n            class=\"block px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 sm:text-sm\"\n          />\n          <div class=\"flex align-items-center justify-between\">\n            <button\n              class=\"font-medium\"\n              *ngIf=\"editCard[card.id]\"\n              (click)=\"updateCard(card)\"\n            >\n              Actualizar\n            </button>\n\n            <button\n              class=\"font-medium text-red-600\"\n              *ngIf=\"editCard[card.id]\"\n              (click)=\"deleteCard(card)\"\n            >\n              Borrar\n            </button>\n          </div>\n        </div>\n        <div\n          (click)=\"addCard(list)\"\n          class=\"pt-8 text-gray-500 hover:cursor-pointer\"\n          style=\"overflow:hidden;\">\n          + Agregar Tarjeta\n        </div>\n        <button\n        class=\"font-medium text-small text-red-700 hover:text-white\" \n          (click)=\"deleteBoardList(list)\"\n        >\n          Eliminar Lista\n        </button>\n      </div>\n    </div>\n\n    <div\n      (click)=\"addList()\"\n      class=\"relative min-h-auto h-16 rounded font-semibold text-lg py-4 px-4\"\n  style=\"background-color: rgb(32, 62, 129); color: white; \"\n    >\n      + Nueva Lista\n    </div>\n  </div>\n\n  <div class=\"flex gap-4 py-12 items-center\">\n    <span class=\"text-3xl font-extrabold text-gray-900 block\">Invitar</span>\n\n    <input\n      [(ngModel)]=\"addUserEmail\"\n      placeholder=\"ejemplo@xd.com\"\n      class=\"block px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 sm:text-sm\"\n    />\n    <button\n      (click)=\"addUser()\"\n      class=\"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500\"\n    >\n      Invitar\n    </button>\n  </div>\n</main>\n","import { Component, HostListener, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { DataService } from 'src/app/services/data.service';\n\n@Component({\n  selector: 'app-board',\n  templateUrl: './board.component.html',\n  styleUrls: ['./board.component.scss'],\n})\nexport class BoardComponent implements OnInit {\n  lists: any[] = [];\n  boardId: string | null = null;\n  editTitle: any = {};\n  editCard: any = {};\n  boardInfo: any = null;\n  titleChanged = false;\n\n  listCards: any = {};\n  addUserEmail = '';\n\n  constructor(\n    private route: ActivatedRoute,\n    private dataService: DataService,\n    private router: Router\n  ) {}\n\n  async ngOnInit() {\n    this.boardId = this.route.snapshot.paramMap.get('id');\n    if (this.boardId) {\n      this.boardInfo = (await this.dataService.getBoardInfo(this.boardId)).data;\n\n      this.lists = await this.dataService.getBoardLists(this.boardId);\n\n      // Retrieve cards for each list\n      for (let list of this.lists) {\n        this.listCards[list.id] = await this.dataService.getListCards(list.id);\n      }\n\n      this.handleRealtimeUpdates();\n    }\n  }\n\n  //\n  // BOARD logic\n  //\n  async saveBoardTitle() {\n    await this.dataService.updateBoard(this.boardInfo);\n    this.titleChanged = false;\n  }\n\n  async deleteBoard() {\n    await this.dataService.deleteBoard(this.boardInfo);\n    this.router.navigateByUrl('/workspace');\n  }\n\n  //\n  // LISTS logic\n  //\n  async addList() {\n    const newList = await this.dataService.addBoardList(\n      this.boardId!,\n      this.lists.length\n    );\n  }\n\n  editingTitle(list: any, edit = false) {\n    this.editTitle[list.id] = edit;\n  }\n\n  async updateListTitle(list: any) {\n    await this.dataService.updateBoardList(list);\n    this.editingTitle(list, false);\n  }\n\n  async deleteBoardList(list: any) {\n    await this.dataService.deleteBoardList(list);\n  }\n\n  //\n  // CARDS logic\n  //\n  async addCard(list: any) {\n    await this.dataService.addListCard(\n      list.id,\n      this.boardId!,\n      this.listCards[list.id].length\n    );\n  }\n\n  editingCard(card: any, edit = false) {\n    this.editCard[card.id] = edit;\n  }\n\n  async updateCard(card: any) {\n    await this.dataService.updateCard(card);\n    this.editingCard(card, false);\n  }\n\n  async deleteCard(card: any) {\n    await this.dataService.deleteCard(card);\n  }\n\n  // Invites\n  async addUser() {\n    const res = await this.dataService.addUserToBoard(\n      this.boardId!,\n      this.addUserEmail\n    );\n    this.addUserEmail = '';\n  }\n\n  @HostListener('document:keydown', ['$event']) onKeydownHandler(\n    event: KeyboardEvent\n  ) {\n    if (event.keyCode === 27) {\n      // Close whatever needs to be closed!\n      this.titleChanged = false;\n\n      Object.keys(this.editCard).map((item) => {\n        this.editCard[item] = false;\n        return item;\n      });\n\n      Object.keys(this.editTitle).map((item) => {\n        this.editTitle[item] = false;\n        return item;\n      });\n    }\n  }\n\n  handleRealtimeUpdates() {\n    this.dataService.getTableChanges().subscribe((update: any) => {\n      const record = update.new?.id ? update.new : update.old;\n      const event = update.eventType;\n\n      if (!record) return;\n\n      if (update.table == 'cards') {\n        if (event === 'INSERT') {\n          this.listCards[record.list_id].push(record);\n        } else if (event === 'UPDATE') {\n          const newArr = [];\n\n          for (let card of this.listCards[record.list_id]) {\n            if (card.id == record.id) {\n              card = record;\n            }\n            newArr.push(card);\n          }\n          this.listCards[record.list_id] = newArr;\n        } else if (event === 'DELETE') {\n          this.listCards[record.list_id] = this.listCards[\n            record.list_id\n          ].filter((card: any) => card.id !== record.id);\n        }\n      } else if (update.table == 'lists') {\n        if (event === 'INSERT') {\n          this.lists.push(record);\n          this.listCards[record.id] = [];\n        } else if (event === 'UPDATE') {\n          this.lists.filter((list: any) => list.id === record.id)[0] = record;\n\n          const newArr = [];\n\n          for (let list of this.lists) {\n            if (list.id == record.id) {\n              list = record;\n            }\n            newArr.push(list);\n          }\n          this.lists = newArr;\n        } else if (event === 'DELETE') {\n          this.lists = this.lists.filter((list: any) => list.id !== record.id);\n        }\n      }\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module"}